'use strict';var POLY={};POLY.PI_3div4=3*Math.PI/4;POLY.PI_2=Math.PI/2;POLY.EPSILON=1E-12;POLY.kAlpha=0.3;POLY.Orientation={CW:1,CCW:-1,COLLINEAR:0};POLY.Point=function(a,b){this.x=+a||0;this.y=+b||0;this._p2t_edge_list=null};
POLY.Point.prototype={constructor:POLY.Point,toString:function(){return"("+this.x+";"+this.y+")"},clone:function(){return new POLY.Point(this.x,this.y)},set_zero:function(){this.y=this.x=0;return this},set:function(a,b){this.x=+a||0;this.y=+b||0;return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},add:function(a){this.x+=a.x;this.y+=a.y;return this},sub:function(a){this.x-=a.x;this.y-=a.y;return this},mul:function(a){this.x*=a;this.y*=a;return this},length:function(){return Math.sqrt(this.x*
this.x+this.y*this.y)},normalize:function(){var a=this.length();this.x/=a;this.y/=a;return a},equals:function(a){return this.x===a.x&&this.y===a.y}};POLY.negate=function(a){return new POLY.Point(-a.x,-a.y)};POLY.add=function(a,b){return new POLY.Point(a.x+b.x,a.y+b.y)};POLY.sub=function(a,b){return new POLY.Point(a.x-b.x,a.y-b.y)};POLY.mul=function(a,b){return new POLY.Point(a*b.x,a*b.y)};
POLY.cross=function(a,b){return"number"===typeof a?"number"===typeof b?a*b:new POLY.Point(-a*b.y,a*b.x):"number"===typeof b?new POLY.Point(b*a.y,-b*a.x):a.x*b.y-a.y*b.x};POLY.Error=function(a){console.log(a)};POLY.toString=function(a){var b=a.toString();return"[object Object]"===b?new POLY.Point.prototype.toString.call(a):b};POLY.compare=function(a,b){return a.y===b.y?a.x-b.x:a.y-b.y};POLY.equals=function(a,b){return a.x===b.x&&a.y===b.y};POLY.dot=function(a,b){return a.x*b.x+a.y*b.y};
POLY.PointError=function(a,b){this.name="PointError";this.points=b=b||[];this.message=a||"Invalid Points!";for(var c=0;c<b.length;c++)this.message+=" "+POLY.Point.toString(b[c])};POLY.Edge=function(a,b){this.p=a;this.q=b;a.y>b.y?(this.q=a,this.p=b):a.y===b.y&&(a.x>b.x?(this.q=a,this.p=b):a.x===b.x&&POLY.PointError("poly2tri Invalid Edge constructor: repeated points!",[a]));this.q._p2t_edge_list||(this.q._p2t_edge_list=[]);this.q._p2t_edge_list.push(this)};
POLY.orient2d=function(a,b,c){a=(a.x-c.x)*(b.y-c.y)-(a.y-c.y)*(b.x-c.x);return a>-POLY.EPSILON&&a<POLY.EPSILON?POLY.Orientation.COLLINEAR:0<a?POLY.Orientation.CCW:POLY.Orientation.CW};POLY.inScanArea=function(a,b,c,d){var e=d.x;d=d.y;var f=a.x-e;a=a.y-d;return f*(b.y-d)-(b.x-e)*a<=POLY.EPSILON||(c.x-e)*a-f*(c.y-d)<=POLY.EPSILON?!1:!0};POLY.Node=function(a,b){this.point=a;this.triangle=b||null;this.prev=this.next=null;this.value=a.x};
POLY.AdvancingFront=function(a,b){this.head_=a;this.tail_=b;this.search_node_=a};
POLY.AdvancingFront.prototype={constructor:POLY.AdvancingFront,head:function(){return this.head_},setHead:function(a){this.head_=a},tail:function(){return this.tail_},setTail:function(a){this.tail_=a},search:function(){return this.search_node_},setSearch:function(a){this.search_node_=a},findSearchNode:function(){return this.search_node_},locateNode:function(a){var b=this.search_node_;if(a<b.value)for(;b=b.prev;){if(a>=b.value)return this.search_node_=b}else for(;b=b.next;)if(a<b.value)return this.search_node_=
b.prev;return null},locatePoint:function(a){var b=a.x,c=this.findSearchNode(b),d=c.point.x;if(b===d)a!==c.point&&(a===c.prev.point?c=c.prev:a===c.next.point?c=c.next:POLY.Error("poly2tri Invalid AdvancingFront.locatePoint() call"));else if(b<d)for(;(c=c.prev)&&a!==c.point;);else for(;(c=c.next)&&a!==c.point;);c&&(this.search_node_=c);return c}};POLY.Basin=function(){this.right_node=this.bottom_node=this.left_node=null;this.width=0;this.left_highest=!1};
POLY.Basin.prototype.clear=function(){this.right_node=this.bottom_node=this.left_node=null;this.width=0;this.left_highest=!1};POLY.EdgeEvent=function(){this.constrained_edge=null;this.right=!1};POLY.triangulate=function(a){a.initTriangulation();a.createAdvancingFront();POLY.sweepPoints(a);POLY.finalizationPolygon(a)};
POLY.sweepPoints=function(a){var b,c=a.pointCount();for(b=1;b<c;++b)for(var d=a.getPoint(b),e=POLY.pointEvent(a,d),d=d._p2t_edge_list,f=0;d&&f<d.length;++f)POLY.edgeEventByEdge(a,d[f],e)};POLY.finalizationPolygon=function(a){for(var b=a.front().head().next.triangle,c=a.front().head().next.point;!b.getConstrainedEdgeCW(c);)b=b.neighborCCW(c);a.meshClean(b)};
POLY.pointEvent=function(a,b){var c=a.locateNode(b),d=POLY.newFrontTriangle(a,b,c);b.x<=c.point.x+POLY.EPSILON&&POLY.fill(a,c);POLY.fillAdvancingFront(a,d);return d};POLY.edgeEventByEdge=function(a,b,c){a.edge_event.constrained_edge=b;a.edge_event.right=b.p.x>b.q.x;POLY.isEdgeSideOfTriangle(c.triangle,b.p,b.q)||(POLY.fillEdgeEvent(a,b,c),POLY.edgeEventByPoints(a,b.p,b.q,c.triangle,b.q))};
POLY.edgeEventByPoints=function(a,b,c,d,e){if(!POLY.isEdgeSideOfTriangle(d,b,c)){var f=d.pointCCW(e),g=POLY.orient2d(c,f,b);g===POLY.Orientation.COLLINEAR&&POLY.PointError("poly2tri EdgeEvent: Collinear not supported!",[c,f,b]);var f=d.pointCW(e),h=POLY.orient2d(c,f,b);h===POLY.Orientation.COLLINEAR&&POLY.PointError("poly2tri EdgeEvent: Collinear not supported!",[c,f,b]);g===h?(d=g===POLY.Orientation.CW?d.neighborCCW(e):d.neighborCW(e),POLY.edgeEventByPoints(a,b,c,d,e)):POLY.flipEdgeEvent(a,b,c,d,
e)}};POLY.isEdgeSideOfTriangle=function(a,b,c){var d=a.edgeIndex(b,c);return-1!==d?(a.markConstrainedEdgeByIndex(d),(a=a.getNeighbor(d))&&a.markConstrainedEdgeByPoints(b,c),!0):!1};POLY.newFrontTriangle=function(a,b,c){var d=new POLY.Triangle(b,c.point,c.next.point);d.markNeighbor(c.triangle);a.addToMap(d);b=new POLY.Node(b);b.next=c.next;b.prev=c;c.next.prev=b;c.next=b;POLY.legalize(a,d)||a.mapTriangleToNodes(d);return b};
POLY.fill=function(a,b){var c=new POLY.Triangle(b.prev.point,b.point,b.next.point);c.markNeighbor(b.prev.triangle);c.markNeighbor(b.triangle);a.addToMap(c);b.prev.next=b.next;b.next.prev=b.prev;POLY.legalize(a,c)||a.mapTriangleToNodes(c)};
POLY.fillAdvancingFront=function(a,b){for(var c=b.next,d;c.next;){d=POLY.holeAngle(c);if(d>POLY.PI_2||d<-POLY.PI_2)break;POLY.fill(a,c);c=c.next}for(c=b.prev;c.prev;){d=POLY.holeAngle(c);if(d>POLY.PI_2||d<-POLY.PI_2)break;POLY.fill(a,c);c=c.prev}b.next&&b.next.next&&(d=POLY.basinAngle(b),d<POLY.PI_3div4&&POLY.fillBasin(a,b))};POLY.basinAngle=function(a){return Math.atan2(a.point.y-a.next.next.point.y,a.point.x-a.next.next.point.x)};
POLY.holeAngle=function(a){var b=a.next.point.x-a.point.x,c=a.next.point.y-a.point.y,d=a.prev.point.x-a.point.x;a=a.prev.point.y-a.point.y;return Math.atan2(b*a-c*d,b*d+c*a)};
POLY.legalize=function(a,b){for(var c=0;3>c;++c)if(!b.delaunay_edge[c]){var d=b.getNeighbor(c);if(d){var e=b.getPoint(c),f=d.oppositePoint(b,e),g=d.index(f);if(d.constrained_edge[g]||d.delaunay_edge[g])b.constrained_edge[c]=d.constrained_edge[g];else if(POLY.inCircle(e,b.pointCCW(e),b.pointCW(e),f))return b.delaunay_edge[c]=!0,d.delaunay_edge[g]=!0,POLY.rotateTrianglePair(b,e,d,f),(e=!POLY.legalize(a,b))&&a.mapTriangleToNodes(b),(e=!POLY.legalize(a,d))&&a.mapTriangleToNodes(d),b.delaunay_edge[c]=
!1,d.delaunay_edge[g]=!1,!0}}return!1};POLY.inCircle=function(a,b,c,d){var e=a.x-d.x;a=a.y-d.y;var f=b.x-d.x;b=b.y-d.y;var g=e*b-f*a;if(0>=g)return!1;var h=c.x-d.x;c=c.y-d.y;d=h*a-e*c;return 0>=d?!1:0<(e*e+a*a)*(f*c-h*b)+(f*f+b*b)*d+(h*h+c*c)*g};
POLY.rotateTrianglePair=function(a,b,c,d){var e,f,g,h;e=a.neighborCCW(b);f=a.neighborCW(b);g=c.neighborCCW(d);h=c.neighborCW(d);var k,l,m,n;k=a.getConstrainedEdgeCCW(b);l=a.getConstrainedEdgeCW(b);m=c.getConstrainedEdgeCCW(d);n=c.getConstrainedEdgeCW(d);var p,q,r,s;p=a.getDelaunayEdgeCCW(b);q=a.getDelaunayEdgeCW(b);r=c.getDelaunayEdgeCCW(d);s=c.getDelaunayEdgeCW(d);a.legalize(b,d);c.legalize(d,b);c.setDelaunayEdgeCCW(b,p);a.setDelaunayEdgeCW(b,q);a.setDelaunayEdgeCCW(d,r);c.setDelaunayEdgeCW(d,s);
c.setConstrainedEdgeCCW(b,k);a.setConstrainedEdgeCW(b,l);a.setConstrainedEdgeCCW(d,m);c.setConstrainedEdgeCW(d,n);a.clearNeigbors();c.clearNeigbors();e&&c.markNeighbor(e);f&&a.markNeighbor(f);g&&a.markNeighbor(g);h&&c.markNeighbor(h);a.markNeighbor(c)};
POLY.fillBasin=function(a,b){POLY.orient2d(b.point,b.next.point,b.next.next.point)===POLY.Orientation.CCW?a.basin.left_node=b.next.next:a.basin.left_node=b.next;for(a.basin.bottom_node=a.basin.left_node;a.basin.bottom_node.next&&a.basin.bottom_node.point.y>=a.basin.bottom_node.next.point.y;)a.basin.bottom_node=a.basin.bottom_node.next;if(a.basin.bottom_node!==a.basin.left_node){for(a.basin.right_node=a.basin.bottom_node;a.basin.right_node.next&&a.basin.right_node.point.y<a.basin.right_node.next.point.y;)a.basin.right_node=
a.basin.right_node.next;a.basin.right_node!==a.basin.bottom_node&&(a.basin.width=a.basin.right_node.point.x-a.basin.left_node.point.x,a.basin.left_highest=a.basin.left_node.point.y>a.basin.right_node.point.y,POLY.fillBasinReq(a,a.basin.bottom_node))}};
POLY.fillBasinReq=function(a,b){if(!POLY.isShallow(a,b)){POLY.fill(a,b);var c;if(b.prev!==a.basin.left_node||b.next!==a.basin.right_node){if(b.prev===a.basin.left_node){c=POLY.orient2d(b.point,b.next.point,b.next.next.point);if(c===POLY.Orientation.CW)return;b=b.next}else if(b.next===a.basin.right_node){c=POLY.orient2d(b.point,b.prev.point,b.prev.prev.point);if(c===POLY.Orientation.CCW)return;b=b.prev}else b=b.prev.point.y<b.next.point.y?b.prev:b.next;POLY.fillBasinReq(a,b)}}};
POLY.isShallow=function(a,b){return a.basin.width>(a.basin.left_highest?a.basin.left_node.point.y-b.point.y:a.basin.right_node.point.y-b.point.y)?!0:!1};POLY.fillEdgeEvent=function(a,b,c){a.edge_event.right?POLY.fillRightAboveEdgeEvent(a,b,c):POLY.fillLeftAboveEdgeEvent(a,b,c)};POLY.fillRightAboveEdgeEvent=function(a,b,c){for(;c.next.point.x<b.p.x;)POLY.orient2d(b.q,c.next.point,b.p)===POLY.Orientation.CCW?POLY.fillRightBelowEdgeEvent(a,b,c):c=c.next};
POLY.fillRightBelowEdgeEvent=function(a,b,c){c.point.x<b.p.x&&(POLY.orient2d(c.point,c.next.point,c.next.next.point)===POLY.Orientation.CCW?POLY.fillRightConcaveEdgeEvent(a,b,c):(POLY.fillRightConvexEdgeEvent(a,b,c),POLY.fillRightBelowEdgeEvent(a,b,c)))};
POLY.fillRightConcaveEdgeEvent=function(a,b,c){POLY.fill(a,c.next);c.next.point!==b.p&&POLY.orient2d(b.q,c.next.point,b.p)===POLY.Orientation.CCW&&POLY.orient2d(c.point,c.next.point,c.next.next.point)===POLY.Orientation.CCW&&POLY.fillRightConcaveEdgeEvent(a,b,c)};
POLY.fillRightConvexEdgeEvent=function(a,b,c){POLY.orient2d(c.next.point,c.next.next.point,c.next.next.next.point)===POLY.Orientation.CCW?POLY.fillRightConcaveEdgeEvent(a,b,c.next):POLY.orient2d(b.q,c.next.next.point,b.p)===POLY.Orientation.CCW&&POLY.fillRightConvexEdgeEvent(a,b,c.next)};POLY.fillLeftAboveEdgeEvent=function(a,b,c){for(;c.prev.point.x>b.p.x;)POLY.orient2d(b.q,c.prev.point,b.p)===POLY.Orientation.CW?POLY.fillLeftBelowEdgeEvent(a,b,c):c=c.prev};
POLY.fillLeftBelowEdgeEvent=function(a,b,c){c.point.x>b.p.x&&(POLY.orient2d(c.point,c.prev.point,c.prev.prev.point)===POLY.Orientation.CW?POLY.fillLeftConcaveEdgeEvent(a,b,c):(POLY.fillLeftConvexEdgeEvent(a,b,c),POLY.fillLeftBelowEdgeEvent(a,b,c)))};
POLY.fillLeftConvexEdgeEvent=function(a,b,c){POLY.orient2d(c.prev.point,c.prev.prev.point,c.prev.prev.prev.point)===POLY.Orientation.CW?POLY.fillLeftConcaveEdgeEvent(a,b,c.prev):POLY.orient2d(b.q,c.prev.prev.point,b.p)===POLY.Orientation.CW&&POLY.fillLeftConvexEdgeEvent(a,b,c.prev)};
POLY.fillLeftConcaveEdgeEvent=function(a,b,c){POLY.fill(a,c.prev);c.prev.point!==b.p&&POLY.orient2d(b.q,c.prev.point,b.p)===POLY.Orientation.CW&&POLY.orient2d(c.point,c.prev.point,c.prev.prev.point)===POLY.Orientation.CW&&POLY.fillLeftConcaveEdgeEvent(a,b,c)};
POLY.flipEdgeEvent=function(a,b,c,d,e){var f=d.neighborAcross(e);f||POLY.Error("poly2tri [BUG:FIXME] FLIP failed due to missing triangle!");var g=f.oppositePoint(d,e);if(d.getConstrainedEdgeAcross(e)){var h=d.index(e);POLY.PointError("poly2tri Intersecting Constraints",[e,g,d.getPoint((h+1)%3),d.getPoint((h+2)%3)])}POLY.inScanArea(e,d.pointCCW(e),d.pointCW(e),g)?(POLY.rotateTrianglePair(d,e,f,g),a.mapTriangleToNodes(d),a.mapTriangleToNodes(f),e===c&&g===b?c===a.edge_event.constrained_edge.q&&b===
a.edge_event.constrained_edge.p&&(d.markConstrainedEdgeByPoints(b,c),f.markConstrainedEdgeByPoints(b,c),POLY.legalize(a,d),POLY.legalize(a,f)):(h=POLY.orient2d(c,g,b),d=POLY.nextFlipTriangle(a,h,d,f,e,g),POLY.flipEdgeEvent(a,b,c,d,e))):(g=POLY.nextFlipPoint(b,c,f,g),POLY.flipScanEdgeEvent(a,b,c,d,f,g),POLY.edgeEventByPoints(a,b,c,d,e))};
POLY.nextFlipTriangle=function(a,b,c,d,e,f){if(b===POLY.Orientation.CCW)return b=d.edgeIndex(e,f),d.delaunay_edge[b]=!0,POLY.legalize(a,d),d.clearDelunayEdges(),c;b=c.edgeIndex(e,f);c.delaunay_edge[b]=!0;POLY.legalize(a,c);c.clearDelunayEdges();return d};
POLY.nextFlipPoint=function(a,b,c,d){var e=POLY.orient2d(b,d,a);if(e===POLY.Orientation.CW)return c.pointCCW(d);if(e===POLY.Orientation.CCW)return c.pointCW(d);POLY.PointError("poly2tri [Unsupported] nextFlipPoint: opposing point on constrained edge!",[b,d,a])};
POLY.flipScanEdgeEvent=function(a,b,c,d,e,f){var g=e.neighborAcross(f);g||POLY.Error("poly2tri [BUG:FIXME] FLIP failed due to missing triangle");e=g.oppositePoint(e,f);POLY.inScanArea(c,d.pointCCW(c),d.pointCW(c),e)?POLY.flipEdgeEvent(a,c,e,g,e):(e=POLY.nextFlipPoint(b,c,g,e),POLY.flipScanEdgeEvent(a,b,c,d,g,e))};
POLY.Context=function(a,b){b=b||{};this.triangles_=[];this.map_=[];this.points_=b.cloneArrays?a.slice(0):a;this.edge_list=[];this.af_tail_=this.af_middle_=this.af_head_=this.tail_=this.head_=this.front_=this.pmin_=this.pmax_=null;this.basin=new POLY.Basin;this.edge_event=new POLY.EdgeEvent;this.initEdges(this.points_)};
POLY.Context.prototype={constructor:POLY.Context,addHole:function(a){this.initEdges(a);var b,c=a.length;for(b=0;b<c;b++)this.points_.push(a[b]);return this},addPoint:function(a){this.points_.push(a);return this},addPoints:function(a){this.points_=this.points_.concat(a);return this},triangulate:function(){POLY.triangulate(this);return this},getBoundingBox:function(){return{min:this.pmin_,max:this.pmax_}},getTriangles:function(){return this.triangles_},front:function(){return this.front_},pointCount:function(){return this.points_.length},
head:function(){return this.head_},setHead:function(a){this.head_=a},tail:function(){return this.tail_},setTail:function(a){this.tail_=a},getMap:function(){return this.map_},initTriangulation:function(){var a=this.points_[0].x,b=this.points_[0].x,c=this.points_[0].y,d=this.points_[0].y,e,f=this.points_.length;for(e=1;e<f;e++){var g=this.points_[e];g.x>a&&(a=g.x);g.x<b&&(b=g.x);g.y>c&&(c=g.y);g.y<d&&(d=g.y)}this.pmin_=new POLY.Point(b,d);this.pmax_=new POLY.Point(a,c);e=POLY.kAlpha*(a-b);c=POLY.kAlpha*
(c-d);this.head_=new POLY.Point(a+e,d-c);this.tail_=new POLY.Point(b-e,d-c);this.points_.sort(POLY.compare)},initEdges:function(a){var b,c=a.length;for(b=0;b<c;++b)this.edge_list.push(new POLY.Edge(a[b],a[(b+1)%c]))},getPoint:function(a){return this.points_[a]},addToMap:function(a){this.map_.push(a)},locateNode:function(a){return this.front_.locateNode(a.x)},createAdvancingFront:function(){var a,b,c;c=new POLY.Triangle(this.points_[0],this.tail_,this.head_);this.map_.push(c);a=new POLY.Node(c.getPoint(1),
c);b=new POLY.Node(c.getPoint(0),c);c=new POLY.Node(c.getPoint(2));this.front_=new POLY.AdvancingFront(a,c);a.next=b;b.next=c;b.prev=a;c.prev=b},removeNode:function(a){},mapTriangleToNodes:function(a){for(var b=0;3>b;++b)if(!a.getNeighbor(b)){var c=this.front_.locatePoint(a.pointCW(a.getPoint(b)));c&&(c.triangle=a)}},removeFromMap:function(a){var b,c=this.map_,d=c.length;for(b=0;b<d;b++)if(c[b]===a){c.splice(b,1);break}},meshClean:function(a){a=[a];for(var b,c;b=a.pop();)if(!b.isInterior())for(b.setInterior(!0),
this.triangles_.push(b),c=0;3>c;c++)b.constrained_edge[c]||a.push(b.getNeighbor(c))}};POLY.Triangle=function(a,b,c){this.points_=[a,b,c];this.neighbors_=[null,null,null];this.interior_=!1;this.constrained_edge=[!1,!1,!1];this.delaunay_edge=[!1,!1,!1]};
POLY.Triangle.prototype={constructor:POLY.Triangle,toString:function(){var a=POLY.Point.toString;return"["+a(this.points_[0])+a(this.points_[1])+a(this.points_[2])+"]"},getPoint:function(a){return this.points_[a]},getNeighbor:function(a){return this.neighbors_[a]},containsPoint:function(a){var b=this.points_;return a===b[0]||a===b[1]||a===b[2]},containsEdge:function(a){return this.containsPoint(a.p)&&this.containsPoint(a.q)},containsPoints:function(a,b){return this.containsPoint(a)&&this.containsPoint(b)},
isInterior:function(){return this.interior_},setInterior:function(a){this.interior_=a;return this},markNeighborPointers:function(a,b,c){var d=this.points_;a===d[2]&&b===d[1]||a===d[1]&&b===d[2]?this.neighbors_[0]=c:a===d[0]&&b===d[2]||a===d[2]&&b===d[0]?this.neighbors_[1]=c:a===d[0]&&b===d[1]||a===d[1]&&b===d[0]?this.neighbors_[2]=c:POLY.Error("poly2tri Invalid Triangle.markNeighborPointers() call")},markNeighbor:function(a){var b=this.points_;a.containsPoints(b[1],b[2])?(this.neighbors_[0]=a,a.markNeighborPointers(b[1],
b[2],this)):a.containsPoints(b[0],b[2])?(this.neighbors_[1]=a,a.markNeighborPointers(b[0],b[2],this)):a.containsPoints(b[0],b[1])&&(this.neighbors_[2]=a,a.markNeighborPointers(b[0],b[1],this))},clearNeigbors:function(){this.neighbors_[0]=null;this.neighbors_[1]=null;this.neighbors_[2]=null},clearDelunayEdges:function(){this.delaunay_edge[0]=!1;this.delaunay_edge[1]=!1;this.delaunay_edge[2]=!1},pointCW:function(a){var b=this.points_;return a===b[0]?b[2]:a===b[1]?b[0]:a===b[2]?b[1]:null},pointCCW:function(a){var b=
this.points_;return a===b[0]?b[1]:a===b[1]?b[2]:a===b[2]?b[0]:null},neighborCW:function(a){return a===this.points_[0]?this.neighbors_[1]:a===this.points_[1]?this.neighbors_[2]:this.neighbors_[0]},neighborCCW:function(a){return a===this.points_[0]?this.neighbors_[2]:a===this.points_[1]?this.neighbors_[0]:this.neighbors_[1]},getConstrainedEdgeCW:function(a){return a===this.points_[0]?this.constrained_edge[1]:a===this.points_[1]?this.constrained_edge[2]:this.constrained_edge[0]},getConstrainedEdgeCCW:function(a){return a===
this.points_[0]?this.constrained_edge[2]:a===this.points_[1]?this.constrained_edge[0]:this.constrained_edge[1]},getConstrainedEdgeAcross:function(a){return a===this.points_[0]?this.constrained_edge[0]:a===this.points_[1]?this.constrained_edge[1]:this.constrained_edge[2]},setConstrainedEdgeCW:function(a,b){a===this.points_[0]?this.constrained_edge[1]=b:a===this.points_[1]?this.constrained_edge[2]=b:this.constrained_edge[0]=b},setConstrainedEdgeCCW:function(a,b){a===this.points_[0]?this.constrained_edge[2]=
b:a===this.points_[1]?this.constrained_edge[0]=b:this.constrained_edge[1]=b},getDelaunayEdgeCW:function(a){return a===this.points_[0]?this.delaunay_edge[1]:a===this.points_[1]?this.delaunay_edge[2]:this.delaunay_edge[0]},getDelaunayEdgeCCW:function(a){return a===this.points_[0]?this.delaunay_edge[2]:a===this.points_[1]?this.delaunay_edge[0]:this.delaunay_edge[1]},setDelaunayEdgeCW:function(a,b){a===this.points_[0]?this.delaunay_edge[1]=b:a===this.points_[1]?this.delaunay_edge[2]=b:this.delaunay_edge[0]=
b},setDelaunayEdgeCCW:function(a,b){a===this.points_[0]?this.delaunay_edge[2]=b:a===this.points_[1]?this.delaunay_edge[0]=b:this.delaunay_edge[1]=b},neighborAcross:function(a){return a===this.points_[0]?this.neighbors_[0]:a===this.points_[1]?this.neighbors_[1]:this.neighbors_[2]},oppositePoint:function(a,b){var c=a.pointCW(b);return this.pointCW(c)},legalize:function(a,b){var c=this.points_;a===c[0]?(c[1]=c[0],c[0]=c[2],c[2]=b):a===c[1]?(c[2]=c[1],c[1]=c[0],c[0]=b):a===c[2]?(c[0]=c[2],c[2]=c[1],c[1]=
b):POLY.Error("poly2tri Invalid Triangle.legalize() call")},index:function(a){var b=this.points_;if(a===b[0])return 0;if(a===b[1])return 1;if(a===b[2])return 2;POLY.Error("poly2tri Invalid Triangle.index() call")},edgeIndex:function(a,b){var c=this.points_;if(a===c[0]){if(b===c[1])return 2;if(b===c[2])return 1}else if(a===c[1]){if(b===c[2])return 0;if(b===c[0])return 2}else if(a===c[2]){if(b===c[0])return 1;if(b===c[1])return 0}return-1},markConstrainedEdgeByIndex:function(a){this.constrained_edge[a]=
!0},markConstrainedEdgeByEdge:function(a){this.markConstrainedEdgeByPoints(a.p,a.q)},markConstrainedEdgeByPoints:function(a,b){var c=this.points_;if(b===c[0]&&a===c[1]||b===c[1]&&a===c[0])this.constrained_edge[2]=!0;else if(b===c[0]&&a===c[2]||b===c[2]&&a===c[0])this.constrained_edge[1]=!0;else if(b===c[1]&&a===c[2]||b===c[2]&&a===c[1])this.constrained_edge[0]=!0}};
